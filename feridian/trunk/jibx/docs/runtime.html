<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Runtime usage</title>
      <style type="text/css">
        @import url("./style/tigris.css");
        @import url("./style/maven.css");
    .dtd-comment {
      color: #993399;
      font-weight: bold;
      </style>
      <script type="text/javascript">
        if (document.layers) {
          document.writeln('<link rel="stylesheet" type="text/css" href="./style/ns4_only.css" media="screen" /><link rel="stylesheet" type="text/css" href="./style/maven_ns4_only.css" media="screen" />')
        }
      </script>
      <link rel="stylesheet" type="text/css" href="./style/print.css" media="print" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body class="composite">
<div id="banner">
<table border="0" cellspacing="0" cellpadding="8" width="100%">
  <tbody>
    <tr>
      <td><h1>Runtime usage</h1>
      </td>
      <td>
      <div align="right" id="login"><a href="http://sourceforge.net">
      <img src="http://sourceforge.net/sflogo.php?group_id=69358&amp;type=5"
        width="210" height="62" border="0" alt="SourceForge.net Logo"></a></div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<div id="breadcrumbs">
<table border="0" cellspacing="0" cellpadding="4" width="100%">
  <tbody>
    <tr>
      <td>
        <div align="right">
          <a href="./index.html">Home Page</a> |
          <a href="http://www.sourceforge.net/projects/jibx/">SourceForge Page</a> |
          <a href="./mail-lists.html">Mailing Lists</a> |
          <a href="http://wiki.jibx.org">Wiki</a> |
          <a href="./bugs.html">Bugs</a> |
          <a href="http://sourceforge.net/project/showfiles.php?group_id=69358">Downloads</a>
        </div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<table border="0" cellspacing="0" cellpadding="8" width="100%" id="main">
  <tbody>
	<tr valign="top">
	  <td id="leftcol" width="20%">
		<div id="navcolumn">


                  <div>
            <strong>JiBX Basics</strong>
                              <div>
            <small>
                    <a href="index.html">Overview</a>
                  </small>
                              <div>
            <small>
                    <a href="flexibility.html">Flexibility</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="performance.html">Performance</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="clean-code.html">Clean code</a>
                  </small>
                </div>
                      </div>
                                    <div>
            <small>
                    <a href="status.html">News and Status</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="comments.html">User Comments</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="bugs.html">Bugs</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="start.html">Getting Started</a>
                  </small>
                              <div>
            <small>
                    <a href="tutorial/binding-tutorial.html">Binding Tutorial</a>
                  </small>
                              <div>
            <small>
                    <a href="tutorial/binding-start.html">A basic binding</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-extras.html">Binding extras</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-structures.html">Structure mapping</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-collects.html">Collections</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-mappings.html">Using mappings</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-advanced.html">Advanced binding</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-extend.html">Method hooks</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="tutorial/binding-custom.html">Custom code</a>
                  </small>
                </div>
                      </div>
                                    <div>
            <small>
                    <a href="bindcomp.html">Binding Compiler</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="bindonload.html">Binding on Load</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <span class="menu-selection">Runtime</span>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="extras.html">JiBX Extras</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="building.html">Building JiBX</a>
                  </small>
                </div>
                      </div>
                                    <div>
            <small>
                    <a href="schema.html">Schema Compatibility</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="mail-lists.html">Mailing Lists</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="faq.html">FAQ</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="contributing.html">Contributing</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="jibx-license.html">License</a>
                  </small>
                </div>
                      </div>
                        <div>
            <strong>Binding Definition</strong>
                              <div>
            <small>
                    <a href="details/binding-overview.html">Definition details</a>
                  </small>
                              <div>
            <small>
                    <a href="details/contexts.html">Definition contexts</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/conversions.html">Conversions</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/xml-summary.html">XML summary</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/binding-element.html">&lt;binding&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/include-element.html">&lt;include&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/format-element.html">&lt;format&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/namespace-element.html">&lt;namespace&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/mapping-element.html">&lt;mapping&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/value-element.html">&lt;value&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/structure-element.html">&lt;structure&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/collection-element.html">&lt;collection&gt; element</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="details/binding-attributes.html">Attribute groups</a>
                  </small>
                </div>
                      </div>
                      </div>
                        <div>
            <strong>Usage API</strong>
                              <div>
            <small>
                    <a href="./api/index.html">Runtime JavaDocs</a>
                  </small>
                </div>
                      </div>
                        <div>
            <strong>Subprojects</strong>
                              <div>
            <small>
                    <a href="jibxtools/index.html">Generator Tools</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="jibxsoap/index.html">JibxSoap</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="siteamatic/index.html">SiteAMatic</a>
                  </small>
                </div>
                                    <div>
            <small>
                    <a href="xsd2jibx/index.html">Xsd2Jibx</a>
                  </small>
                </div>
                      </div>
      

        </div>
      </td>
      <td>


      <div id="bodycol">
      <div class="app">
      <div class="h3">
      <h3><a name="runtime">Runtime</a></h3>

<p>After running the binding compiler the modified classes are ready to be used.
You'll need to include the <i>/lib/jibx-run.jar</i> and
<i>/lib/xpp3.jar</i> jar files from the distribution in your application
classpath (but not the <i>/lib/bcel.jar</i> and <i>/lib/jibx-bind.jar</i>
files, which are only used by the binding compiler). You'll also need to add a
little code at whatever point you want to marshal or unmarshal a document. This uses the
<code>org.jibx.runtime.BindingDirectory</code> class that's included in the
JiBX runtime jar, along with a class that JiBX generates in the same package
as your code (or as the first class file it modifies, if your code is spread
across multiple packages). You don't need to worry about the details of getting
at this generated class, though. Instead, you access it by passing one of the
classes defined by a global mapping (one that's a child of the root <b>binding</b>
element) in your binding to the <code>BindingDirectory</code> (if you've
compiled more than one binding into the code, you'll also need to pass the name
of the binding you want to use). The code is simple:</p>

<div id="source"><pre>    IBindingFactory bfact = 
        BindingDirectory.getFactory(Customer.class);
</pre></div>

<p>Here <i>Customer</i> is the name of a class with a global mapping in
the binding. The <code>org.jibx.runtime.IBindingFactory</code> interface that gets
returned provides methods to construct marshalling and unmarshalling contexts,
which in turn allow you to do the actual marshal and unmarshal operations.
Here's an unmarshal example:</p>

<div id="source"><pre>    IUnmarshallingContext uctx = bfact.createUnmarshallingContext();
    Object obj = uctx.unmarshalDocument
        (new FileInputStream("filename.xml"), null);
</pre></div>

<p>This is just one of several variations of an unmarshal call, in this case to
unmarshal an XML document in the file <i>filename.xml</i>. You can pass a
reader instead of a stream as the source of the document data if you want, and
can also specify an encoding for the document - see the JavaDocs for details. The
returned object will be an instance of one of your classes defined with a global
mapping in the binding - you can either check the type with <b>instanceof</b>
or cast directly to your object type, if you know what it is.</p>

<p>Marshalling is just as easy. Here's an example:</p>

<div id="source"><pre>    IMarshallingContext mctx = bfact.createMarshallingContext();
    mctx.marshalDocument(obj, "UTF-8", null,
        new FileOutputStream("filename.xml"));
</pre></div>

<p>As with the unmarshal example, this is just one of several variations that
can be used for the marshal call. This marshals the object to an XML document
written to the file <i>filename.xml</i>, with <b>UTF-8</b> character encoding
(the most common choice for XML). The code as shown writes the output document
with no extra whitespace; you can use the <code>setIndent()</code> method of the
context to add whitespace for readability, if you wish. You can pass a writer
instead of a stream, as well as some other variations - see the following
section for details on character encoding usages, and the JavaDocs for the
different types of marshal calls. The object to be
marshalled must always be an instance of a class defined with a global
mapping in the binding.</p>

	  </div>
      <div class="h3">
      <h3><a name="encodings">Character encodings</a></h3>

<p>The Java core classes provides <code>java.io.Writer</code> implementations
that support a wide variety of character encodings. These can wrap simple output
streams, and handle the conversions from Java characters to bytes as appropriate
for the particular encoding used by the writer. This direct conversion of
characters to bytes is not sufficient for use with XML, though. The problem is
that character encodings may not allow for all the legal XML character codes.
Any XML characters that are not supported by the output encoding need to be
converted to <i>character references</i> for output (see the XML recommendation
for details).</p>

<p>Because of this need to use character references, JiBX supports the use of
<i>character escapers</i> for output conversion handling. For the widely-used
UTF-8 and ISO-8859-1 (Western European character set) encodings implementations
are included that handle both stream and writer output formats automatically
(though using a stream will provide the best performance). The US-ASCII 7-bit
format is also handled automatically, though in this case a
<code>java.io.Writer</code> is always used internally.</p>

<p>Other character encodings can be used for output if you supply an appropriate
<code>org.jibx.runtime.ICharacterEscaper</code> instance to be used with the
output stream or writer. Depending on the encoding, you may even be able to use
one of the existing character escaper implementation classes from the
<code>org.jibx.runtime.impl</code> package directly, or at least base your own
escaper code on one of those implementation classes. For most users the standard
encodings are all that will ever be needed, but this approach allows other
alternatives to be used when necessary for special requirements.</p>

	  </div>
      <div class="h3">
      <h3><a name="outputs">Output formats</a></h3>

<p>JiBX also provides the ability to generate output formats other than text, by
using different implementations of the <code>org.jibx.runtime.IXMLWriter</code>
interface. The only implementations of this interface currently provided are for
text output to streams or writers. In the future, implementations that output
marshalled documents as SAX2 or XMLPull parse event streams are planned to become
part of the standard JiBX distribution. Until then, users with special
requirements in this area can implement their own versions of this interface and
use it directly.</p>

      </div>
      </div>
      </div>


      </td>
    </tr>
  </tbody>
</table>
<div id="footer">
<table border="0" cellspacing="0" cellpadding="4">
  <tbody>
    <tr>
      <td> &copy; 2003-2005, Dennis M. Sosnoski (<a href="http://www.sosnoski.com">Sosnoski Software Solutions, Inc.</a>).
      Licensed to the JiBX Project for free distribution and use. </td>
    </tr>
  </tbody>
</table>
</div>
<br>
</body>
</html>
